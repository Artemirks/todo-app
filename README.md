# Todo App. Болдин Артем

Простое приложение для управления задачами, построенное с использованием Go, GORM и PostgreSQL.

## Функциональность

- Создание, чтение, обновление и удаление задач.
- Взаимодействие с PostgreSQL через GORM.
- Контейнеризация с Docker.

## Стек технологий

- **Go (1.24 и выше)** — основной язык программирования.
- **PostgreSQL (13 и выше)** — база данных.
- **GORM** — ORM для работы с базой данных.
- **Docker** — для контейнеризации приложения.
- **Nginx** — для маршрутизации запросов.

## Требования

Для работы приложения необходимо:
- **Go 1.24 или выше**
- **PostgreSQL 13 или выше**
- **Docker и Docker Compose**
- **Nginx**

## Развертывание приложения

1. Клонируйте репозиторий:
    ```bash
    git clone https://github.com/Artemirks/todo-app.git
    cd todo-app
    ```

2. Создайте файл `.env` на основе шаблона:
    ```bash
    cp .env.example .env
    ```

3. Заполните `.env` файл (пароли и другие конфиденциальные данные):
    - `DB_HOST`: хост для базы данных (обычно это будет имя сервиса в Docker Compose — `db`).
    - **Важно:** Если вы хотите запускать unit-тесты, используйте `localhost` для значения `DB_HOST`, иначе подключение к базе данных через Docker не будет работать.
    - `DB_PORT`: порт для подключения (обычно 5432).
    - `DB_USER`: имя пользователя для базы данных.
    - `DB_PASSWORD`: пароль для базы данных.
    - `DB_NAME`: название базы данных.

4. Запустите приложение с помощью Docker Compose:
    ```bash
    docker-compose up --build
    ```

5. Приложение будет доступно на порту 80.

## Примеры запросов

### Создание задачи
```bash
POST /tasks

Пример запроса:
{
  "title": "Новая задача",
  "completed": false
}
```
Ответ
```
{
  "id": 1,
  "title": "Новая задача",
  "completed": false
}
```

### Получение всех задач
```bash
GET /tasks
```
Ответ
```
[
  {
    "id": 1,
    "title": "Новая задача",
    "completed": false
  },
  {
    "id": 2,
    "title": "Другая задача",
    "completed": true
  }
]
```

### Получение задачи по ID
```bash
GET /tasks/{id}
```
Ответ
```
{
  "id": 1,
  "title": "Новая задача",
  "completed": false
}
```

### Обновление задачи
```bash
PUT /tasks/{id}

Пример запроса:
{
  "title": "Обновленная задача",
  "completed": true
}
```
Ответ
```
{
  "id": 1,
  "title": "Обновленная задача",
  "completed": true
}
```

### Удаление задачи
```bash
DELETE /tasks/{id}
```
Ответ
```
{
  "message": "Задача успешно удалена"
}
```
## Обработка ошибок

Приложение возвращает ошибки в случае:

- Некорректных данных (например, неверный формат JSON или ошибка валидации).
- Несуществующего ресурса (например, задачи с заданным ID не существует).
- Проблем с подключением к базе данных.

### Примеры ошибок:

**При неверных данных:**
```json
{
  "error": "Неверный формат данных"
}
```

**При попытке получить задачу по несуществующему ID:**
```json
{
  "error": "Задача с ID 1 не найдена"
}
```

**При других ошибках:**
```json
{
  "error": "Не удалось создать задачу"
}
```

## Тестирование

Для тестирования API можно использовать Postman.

Также добавлены unit-тесты для проверки корректности работы API. Чтобы запустить тесты, выполните следующую команду:

```bash
go test ./tests
```

Если все правильно настроено, вы увидите следующее сообщение:
```bash
ok      todo-app/tests  0.255s
```